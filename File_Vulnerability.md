File Upload Vulnerability
=========================
웹 애플리케이션에서 제공하는 파일 업로드 기능을 이용하여 허용된 파일 이외의 악의적인 스크립트가     
포함된 소스파일을 첨부하면 공격자는 서버 상에서 스크립트를 실행시켜 웹 서버를 장악할 수 있다.   
게시판 등 업로드 파일에 규제가 없을 경우 취약점이 발생하여 이러한 공격이 가능하다.   
(php, jsp, asp 등의 확장자를 가져야 한다)     

hack.php
--------
![image](https://user-images.githubusercontent.com/61008728/126729844-c3c8bf35-4d42-4ed9-b136-c56029275275.png)   

Low
---
![image](https://user-images.githubusercontent.com/61008728/126730182-3810d81b-1412-417c-adfa-06ef84af99e3.png)      
hack.php 파일을 선택한 후 업로드를 하면 ../../hackable/uploads/ 안에 hack.php 파일이 생성된다.   

![image](https://user-images.githubusercontent.com/61008728/126730349-d6581242-2bea-40a1-a235-fb28777414c0.png)   
브라우저로 'http://localhost/dvwa-master/hackable/uploads/hack.php' 에 들어가면 업로드한 hack.php가 실행된다.   

Medium
------
![image](https://user-images.githubusercontent.com/61008728/126730552-098ae2f3-a605-47fa-a131-9ffe51d9038e.png)     
Medium 문제는 JPEG나 PNG 파일로 업로드해야 한다.     
php, jsp와 같은 확장자로 변경해야 스크립트를 실행시킬 수 있기 때문에 업로드한 PNG 파일을 php 파일로 바꿔야 한다.    

<h4>⭐️ PNG 파일을 php 파일로 바꾸는 두 가지 방법이 있다.</h4>   

<h2>🍄 1. Burp Suite 사용</h2>    
Burp Suite를 사용해서 PNG 파일을 php 파일로 바꾸어 forward를 시키는 방식이 있다.       
'intercept is off' 상태로 hack_mid.PNG 파일을 선택한 후, 'intercept is on'으로 변경하여 Upload를 한다.   

![image](https://user-images.githubusercontent.com/61008728/126732414-1b64efba-5ff6-441a-ac8c-475721ce6948.png)       
filename = "hack_mid.PNG"로 되어 있는데 이 PNG를 php로 바꾸어서 forward를 시킨다.   

![image](https://user-images.githubusercontent.com/61008728/126732598-4ad219da-d63d-4017-a340-16d32549a675.png)     
hack_mid.php로 바뀌어서 성공적으로 업로드 된 것을 확인할 수 있다.   

![image](https://user-images.githubusercontent.com/61008728/126732973-c50931f8-2a90-4840-8716-74227b65a863.png)

<h2>🍄 2. Command Injection 사용</h2>       
Command Injection에서 명령어를 입력하여 PNG 파일을 php파일로 바꿀 수 있다.   
![image](https://user-images.githubusercontent.com/61008728/126742033-02f76dc1-ef7b-4e88-824c-8d6ef0d8ba5f.png)    
먼저 '|| ls ../../hackable/uploads'를 입력하여 어떠한 파일들이 있는지 파악한다.     

![image](https://user-images.githubusercontent.com/61008728/126742400-b5957f35-0514-4507-9d6d-e8cc90654f5b.png)    
업로드한 hack_mid.PNG 파일을 복사하여 hack_mid_cmd.php 파일을 생성하는 명령어(|| cp ../../hackable/uploads/hack_mid.PNG ../../hackable/uploads/hack_mid_cmd.php)를 입력한다.    

![image](https://user-images.githubusercontent.com/61008728/126742434-8c53915e-8a87-47e6-b4df-f06527ec51eb.png)   
다시 '|| ls ../../hackable/uploads' 명령어를 입력해보면 hack_mid_cmd.php 파일이 생성된 것을 확인할 수 있다.    

![image](https://user-images.githubusercontent.com/61008728/126742694-86c61083-95ac-44f5-a02d-86246b1360c5.png)     
hack_mid_cmd.php 파일이 열리는 걸 확인할 수 있다.   

High
----
![image](https://user-images.githubusercontent.com/61008728/126733143-f9a8fab4-12e5-4e9a-9ebc-81816d98f21b.png)
High 문제도 마찬가지 JPEG나 PNG 파일로 업로드해야 한다.   

![image](https://user-images.githubusercontent.com/61008728/126745919-7b7b7174-cbaf-4ab7-9943-45b60b545cf0.png)
그러나, PNG 파일임에도 업로드가 되지 않는다.     
